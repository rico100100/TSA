<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TSA · Índice de herramientas</title>
  <meta name="description" content="Índice de calculadoras, guías y herramientas TSA">
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#121821;
      --panel-2:#0f141b;
      --text:#e6edf3;
      --muted:#9fb0c0;
      --accent:#42a5f5;
      --accent-2:#66bb6a;
      --radius:18px;
      --shadow:0 6px 28px rgba(0,0,0,.35);
      --border:1px solid rgba(255,255,255,.06);
      --focus:0 0 0 3px rgba(66,165,245,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:linear-gradient(180deg,#0b0f14 0%,#0f141b 100%);
      color:var(--text);font:16px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    }
    .wrap{max-width:1200px;margin:0 auto;padding:28px}
    header{
      display:flex;gap:16px;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:18px
    }
    h1{font-size:clamp(22px,3.2vw,32px);margin:0}
    .sub{color:var(--muted);font-size:14px}
    .controls{
      display:flex;gap:12px;align-items:center;flex-wrap:wrap
    }
    .search{
      display:flex;align-items:center;gap:10px;background:var(--panel);border:var(--border);
      padding:10px 12px;border-radius:12px;box-shadow:var(--shadow);min-width:260px
    }
    .search input{
      all:unset;color:var(--text);width:240px
    }
    .toggle{
      display:flex;align-items:center;gap:10px;background:var(--panel);border:var(--border);
      padding:10px 12px;border-radius:12px;box-shadow:var(--shadow)
    }
    .grid{
      display:grid;grid-template-columns:repeat(1,minmax(0,1fr));gap:14px;margin-top:14px
    }
    @media (min-width:640px){.grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (min-width:980px){.grid{grid-template-columns:repeat(3,minmax(0,1fr))}}
    .card{
      background:linear-gradient(180deg,var(--panel) 0%,var(--panel-2) 100%);
      border:var(--border);border-radius:var(--radius);padding:16px;box-shadow:var(--shadow);
      display:flex;flex-direction:column;gap:10px;transition:transform .15s ease, box-shadow .15s ease, border-color .15s ease
    }
    .card:hover{transform:translateY(-2px);box-shadow:0 10px 36px rgba(0,0,0,.45);border-color:rgba(255,255,255,.12)}
    .badge{
      align-self:flex-start;font-size:12px;color:#0b1218;background:#d0e7ff;border-radius:999px;
      padding:4px 10px;color:#0b2239
    }
    .title{font-weight:600;font-size:16px}
    .desc{color:var(--muted);font-size:13px;min-height:36px}
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:auto}
    .btn{
      appearance:none;border:none;cursor:pointer;text-decoration:none;
      padding:10px 12px;border-radius:12px;font-weight:600;
      background:var(--accent);color:#001320;box-shadow:var(--shadow)
    }
    .btn.secondary{background:transparent;color:var(--text);border:1px dashed rgba(255,255,255,.18)}
    .hide{display:none !important}
    .footer{margin-top:22px;color:var(--muted);font-size:12px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;background:#0a1118;border:1px solid rgba(255,255,255,.12);padding:2px 6px;border-radius:6px}
    a{color:inherit}
    /* Focus states */
    .search:focus-within,.toggle:focus-within,.btn:focus{outline:none;box-shadow:var(--focus)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>TSA · Índice</h1>
        <div class="sub">Calculadoras, guías y utilidades. Escribe para filtrar o usa <span class="kbd">Ctrl</span>+<span class="kbd">K</span>.</div>
      </div>
      <div class="controls" role="region" aria-label="Controles">
        <label class="search" aria-label="Buscar módulos">
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M21 20.3 16.7 16a8 8 0 1 0-1.7 1.7L20.3 22 21 20.3zM10.5 17a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13z"/></svg>
          <input id="q" type="search" placeholder="Buscar (carótida, vasculitis, NIHSS…)" autocomplete="off" />
        </label>
        <label class="toggle">
          <input id="newtab" type="checkbox" />
          <span>Abrir en pestaña nueva</span>
        </label>
      </div>
    </header>

    <!-- Listado generado por JS -->
    <section id="grid" class="grid" aria-live="polite"></section>

    <p class="footer">
      Consejo: también puedes pulsar <span class="kbd">Enter</span> en una tarjeta para abrirla.
    </p>

    <noscript>
      <p>JavaScript está desactivado. Enlazamos los módulos básicos:</p>
      <ul>
        <li><a href="ESVS2023-carotida/index.html">ESVS2023-carotida</a></li>
        <li><a href="Funcion_cognitiva_revasc_carotidea/index.html">Funcion_cognitiva_revasc_carotidea</a></li>
        <li><a href="Score_de_Fragilidad/index.html">Score_de_Fragilidad</a></li>
        <li><a href="acst-carotid-calculator/index.html">acst-carotid-calculator</a></li>
        <li><a href="actividades-profesiones-riesgo-sd-TOS/index.html">actividades-profesiones-riesgo-sd-TOS</a></li>
        <li><a href="calc-riesgo-vasc/index.html">calc-riesgo-vasc</a></li>
        <li><a href="calculadora-clinica-Ictus-NIHSS/index.html">calculadora-clinica-Ictus-NIHSS</a></li>
        <li><a href="calculo-carotida-estenosis/index.html">calculo-carotida-estenosis</a></li>
        <li><a href="cap-func-MET-eq-metabolicos/index.html">cap-func-MET-eq-metabolicos</a></li>
        <li><a href="endovac-infeccion-carotida/index.html">endovac-infeccion-carotida</a></li>
        <li><a href="eval-riesgo-estenosis-asint-carotida/index.html">eval-riesgo-estenosis-asint-carotida</a></li>
        <li><a href="funcion-ejecutiva-velocidad-pensamiento/index.html">funcion-ejecutiva-velocidad-pensamiento</a></li>
        <li><a href="vasculitis-enf-vasc/index.html">vasculitis-enf-vasc</a></li>
        <li><a href="vasculitis-resumen/index.html">vasculitis-resumen</a></li>
      </ul>
    </noscript>
  </div>

  <script>
    // === Configuración de módulos (carpetas -> index.html) ===
    const modules = [
      {folder:"ESVS2023-carotida", title:"ESVS 2023 – Carótida", tag:"carótida", desc:"Recomendaciones y cálculo relacionado."},
      {folder:"Funcion_cognitiva_revasc_carotidea", title:"Función cognitiva – Revascularización carotídea", tag:"carótida", desc:"Material de función cognitiva y revascularización."},
      {folder:"Score_de_Fragilidad", title:"Score de Fragilidad", tag:"score", desc:"Valoración de fragilidad clínica."},
      {folder:"acst-carotid-calculator", title:"ACST – Calculadora Carotídea", tag:"carótida", desc:"Herramienta basada en ACST."},
      {folder:"actividades-profesiones-riesgo-sd-TOS", title:"Riesgo por actividad/profesión (Sd. TOS)", tag:"tos", desc:"Listado de actividades/profesiones de riesgo."},
      {folder:"calc-riesgo-vasc", title:"Calculadora de Riesgo Vascular", tag:"riesgo", desc:"Estimación de riesgo vascular."},
      {folder:"calculadora-clinica-Ictus-NIHSS", title:"Ictus – NIHSS", tag:"ictus", desc:"Calculadora clínica NIHSS."},
      {folder:"calculo-carotida-estenosis", title:"Cálculo de Estenosis Carotídea", tag:"carótida", desc:"Herramienta para medir estenosis."},
      {folder:"cap-func-MET-eq-metabolicos", title:"Capacidad funcional (METs)", tag:"mets", desc:"Equivalentes metabólicos y capacidad funcional."},
      {folder:"endovac-infeccion-carotida", title:"EndoVAC – Infección carotídea", tag:"carótida", desc:"Material sobre manejo con EndoVAC."},
      {folder:"eval-riesgo-estenosis-asint-carotida", title:"Riesgo en estenosis carotídea asintomática", tag:"carótida", desc:"Evaluación y estratificación de riesgo."},
      {folder:"funcion-ejecutiva-velocidad-pensamiento", title:"Función ejecutiva y velocidad de pensamiento", tag:"cognición", desc:"Recursos sobre función ejecutiva."},
      {folder:"vasculitis-enf-vasc", title:"Vasculitis – Enfermedad vascular", tag:"vasculitis", desc:"Resumen y criterios de vasculitis."},
      {folder:"vasculitis-resumen", title:"Vasculitis – Resumen", tag:"vasculitis", desc:"Apuntes/hoja de ruta rápida."},
      { href: "Ensayos de Revascularización de la Arteria Transca.pdf", title: "Ensayos de Revascularización de la Arteria Transcarotídea", tag: "PDF", desc: "TCAR." },
      { href: "Stenting Carotídeo_ Análisis Experto de Procedimientos.pdf", title: "Stenting Carotídeo: Análisis Experto de Procedimientos", tag: "PDF", desc: "Stenting Carotídeo." },
    ];

    // === Utilidades ===
    const el = sel => document.querySelector(sel);
    const grid = el("#grid");
    const q = el("#q");
    const newtab = el("#newtab");

    // Render de tarjetas
    function render(items){
      grid.innerHTML = "";
      if(!items.length){
        grid.innerHTML = `<div class="card"><div class="title">Sin resultados</div><div class="desc">Prueba con otro término (p. ej., "carótida" o "NIHSS").</div></div>`;
        return;
      }
      for(const m of items){
        const href = m.href ?? `${m.folder.replace(/\/+$/,"")}/index.html`;
        const pathLabel = m.href ? m.href : `${m.folder}/index.html`;
        const isPDF = /\.pdf$/i.test(href);
        const target = (newtab.checked || isPDF) ? 'target="_blank" rel="noopener"' : "";
        const card = document.createElement("article");
        card.className = "card";
        card.tabIndex = 0;
        card.setAttribute("role","button");
        card.setAttribute("aria-label", `Abrir ${m.title}`);

        card.innerHTML = `
          <span class="badge">${m.tag || "módulo"}</span>
          <div class="title">${m.title || m.folder}</div>
          <div class="desc">${m.desc || ""}</div>
          <div class="actions">
            <a class="btn" href="${href}" ${target}>Abrir</a>
            <a class="btn secondary" href="${href}" ${target} aria-label="Abrir ${pathLabel}">
              ${pathLabel}
            </a>
          </div>
        `;

        // Click/Enter abre
        card.addEventListener("click", e=>{
          if(e.target.closest("a")) return;
          newtab.checked ? window.open(href, "_blank","noopener") : (window.location.href = href);
        });
        card.addEventListener("keydown", e=>{
          if(e.key === "Enter"){
            newtab.checked ? window.open(href, "_blank","noopener") : (window.location.href = href);
          }
        });

        grid.appendChild(card);
      }
    }

    // Filtro
    function filter(){
      const term = (q.value || "").trim().toLowerCase();
      const out = !term ? modules : modules.filter(m=>{
        const hay = [m.title,m.folder,m.tag,m.desc].join(" ").toLowerCase();
        return hay.includes(term);
      });
      render(out);
    }

    // Atajos y eventos
    q.addEventListener("input", filter);
    newtab.addEventListener("change", ()=>render(modules));
    document.addEventListener("keydown", e=>{
      if((e.ctrlKey || e.metaKey) && e.key.toLowerCase()==="k"){
        e.preventDefault(); q.focus(); q.select();
      }
    });

    // Inicio
    render(modules);
  </script>
</body>
</html>


