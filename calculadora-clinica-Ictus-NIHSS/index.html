<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Interactiva de la Escala de Ictus del NIH (NIHSS)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: The application is structured as a task-oriented clinical tool, not a linear report. It starts with a brief introduction, followed by the core interactive calculator, and then dynamically updated results including a severity interpretation, therapeutic guidance, and a prognostic chart. This flow is chosen to mirror a clinician's workflow: assess, score, interpret, decide, and predict. The calculator is broken into logical sections to reduce cognitive load. The dynamic results provide immediate feedback, which is crucial for clinical decision-making. New sections for algorithm and epidemiology are added at the bottom for comprehensive reference. -->
    <!-- Visualization & Content Choices: NIHSS Score -> Goal: Quantify Deficit -> Interactive Form -> User inputs score for each item. NIHSS Total Score -> Goal: Inform Severity, Prognosis & Treatment -> Dynamic Text, Chart.js Bar Chart, and a dynamic Therapeutic Decision card -> The text updates severity level (Leve, Moderado, Grave). The bar chart visualizes outcomes. The new decision card provides actionable therapeutic suggestions based on score ranges (e.g., consider tPA, evaluate for thrombectomy). Justification: This combination of interactive calculation and dynamic, multi-faceted feedback makes complex clinical data easily digestible and actionable. The flowchart provides a clear process overview. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .form-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            display: inline-block;
            vertical-align: middle;
            background-origin: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            flex-shrink: 0;
            border-radius: 100%;
            height: 1.25rem;
            width: 1.25rem;
            border-width: 2px;
            border-color: #cbd5e1;
        }
        .form-radio:checked {
            background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='8' cy='8' r='3'/%3e%3c/svg%3e");
            border-color: transparent;
            background-color: #2563eb;
            background-size: 100% 100%;
            background-position: center;
            background-repeat: no-repeat;
        }
        .result-card {
            transition: background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease;
        }
        .flowchart-step {
            position: relative;
            background-color: #e0f2fe;
            border: 2px solid #7dd3fc;
            color: #0c4a6e;
            padding: 1rem;
            border-radius: 0.75rem;
            text-align: center;
            font-weight: 600;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .flowchart-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #94a3b8;
            padding: 0.5rem 0;
        }
         @media (min-width: 768px) {
            .flowchart-arrow {
                padding: 0 1rem;
            }
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white shadow-sm sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-xl sm:text-2xl font-bold text-slate-800">Calculadora Clínica Completa de Ictus (NIHSS)</h1>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        <section id="intro" class="mb-12 fade-in">
            <div class="bg-white p-6 rounded-xl shadow-md border border-slate-200">
                <h2 class="text-2xl font-bold text-blue-700 mb-3">¿Qué es la escala NIHSS?</h2>
                <p class="text-slate-600 leading-relaxed">
                    La Escala de Ictus de los Institutos Nacionales de Salud (NIHSS, por sus siglas en inglés) es una herramienta clínica estandarizada y validada, utilizada para cuantificar el déficit neurológico en pacientes que han sufrido un accidente cerebrovascular (ACV) o ictus. Compuesta por 11 ítems que evalúan funciones clave como el nivel de conciencia, la función motora, el lenguaje y la sensibilidad, la escala proporciona una puntuación total que oscila entre 0 (sin déficit) y 42 (déficit máximo). Su aplicación sistemática es fundamental en la fase aguda del ictus para objetivar la severidad, guiar decisiones terapéuticas (como la trombólisis o trombectomía), y predecir el pronóstico funcional a corto y largo plazo.
                </p>
            </div>
        </section>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <form id="nihss-form" class="space-y-6">
                    <!-- Items de la escala NIHSS -->
                </form>
            </div>

            <aside class="lg:col-span-1 sticky top-24 self-start">
                <div id="results-container" class="bg-white p-6 rounded-xl shadow-lg border border-slate-200 fade-in space-y-4">
                    <h3 class="text-2xl font-bold text-slate-800 text-center">Resultados Dinámicos</h3>
                    <div id="total-score-card" class="result-card p-6 rounded-xl text-center border-2">
                        <p class="text-lg font-semibold">Puntuación Total NIHSS</p>
                        <p id="total-score" class="text-6xl font-bold">0</p>
                    </div>
                    <div id="severity-card" class="result-card p-4 rounded-xl text-center border-2">
                        <p id="severity-title" class="text-lg font-semibold">Interpretación de Gravedad</p>
                        <p id="severity" class="text-2xl font-bold">Sin Ictus</p>
                    </div>
                    <div id="therapeutic-decision-card" class="result-card p-4 rounded-xl border-2">
                         <h4 id="therapeutic-decision-title" class="text-lg font-semibold text-center mb-2">Decisión Terapéutica Sugerida</h4>
                         <div id="therapeutic-decision-content" class="text-sm space-y-2"></div>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold text-slate-800 mb-3 text-center">Pronóstico Estimado</h4>
                        <div class="chart-container">
                            <canvas id="prognosisChart"></canvas>
                        </div>
                    </div>
                    <div class="pt-2 text-center">
                        <button type="button" id="reset-button" class="bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all w-full">
                            Reiniciar Calculadora
                        </button>
                    </div>
                </div>
            </aside>
        </div>

        <section id="algorithm" class="mt-16 fade-in">
            <div class="bg-white p-8 rounded-xl shadow-md border border-slate-200">
                <h2 class="text-2xl font-bold text-blue-700 mb-6 text-center">Algoritmo de Actuación en Ictus Agudo</h2>
                <div class="flex flex-col md:flex-row items-stretch justify-center gap-0 md:gap-4">
                    <div class="flex-1 flowchart-step">Sospecha de Ictus Agudo<br><span class="font-normal text-sm">(Código Ictus)</span></div>
                    <div class="flowchart-arrow transform md:rotate-0 rotate-90">→</div>
                    <div class="flex-1 flowchart-step">Evaluación inicial y Neuroimagen (TC craneal)<br><span class="font-normal text-sm">Excluir hemorragia</span></div>
                    <div class="flowchart-arrow transform md:rotate-0 rotate-90">→</div>
                    <div class="flex-1 flowchart-step">Ictus Isquémico Confirmado<br><span class="font-normal text-sm">Calcular NIHSS</span></div>
                    <div class="flowchart-arrow transform md:rotate-0 rotate-90">→</div>
                    <div class="flex-1 flowchart-step">Decisión Terapéutica<br><span class="font-normal text-sm">Basada en NIHSS, tiempo y Angio-TC</span></div>
                </div>
            </div>
        </section>

        <section id="epidemiology" class="mt-16 fade-in">
            <div class="bg-white p-8 rounded-xl shadow-md border border-slate-200">
                <h2 class="text-2xl font-bold text-blue-700 mb-4">Epidemiología del Ictus</h2>
                <div class="prose prose-slate max-w-none text-slate-600">
                    <p>El ictus representa una de las principales causas de mortalidad y discapacidad a nivel mundial. Comprender su impacto epidemiológico es clave para la prevención y la gestión sanitaria.</p>
                    <ul>
                        <li><span class="font-semibold">Incidencia en España:</span> Se estima que cada año se producen entre 120.000 y 130.000 nuevos casos de ictus en España, lo que equivale a un nuevo caso cada 6 minutos. La incidencia ajustada por edad es de aproximadamente 150-250 casos por cada 100.000 habitantes al año.</li>
                        <li><span class="font-semibold">Prevalencia:</span> Se calcula que más de un millón de personas en España han sobrevivido a un ictus, muchas de ellas con secuelas discapacitantes. La prevalencia aumenta significativamente con la edad, afectando a más del 8% de la población mayor de 65 años.</li>
                        <li><span class="font-semibold">Impacto Global:</span> El ictus es la segunda causa de muerte y la tercera de discapacidad en el mundo. El ictus isquémico, para el cual se utiliza la escala NIHSS, representa aproximadamente el 85% de todos los casos.</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section id="references" class="mt-16 fade-in">
            <div class="bg-white p-8 rounded-xl shadow-md border border-slate-200">
                <h2 class="text-2xl font-bold text-blue-700 mb-4">Referencias y Estudios Clave (APA 7ª ed.)</h2>
                <div class="prose prose-slate max-w-none text-slate-600">
                    <p>La evidencia que respalda el uso de la escala NIHSS es robusta y se ha consolidado a lo largo de décadas de investigación. Las siguientes referencias, actualizadas hasta 2025, representan estudios fundamentales y guías clínicas que validan su aplicación y su valor pronóstico.</p>
                    <ul class="space-y-3">
                        <li>Brott, T., Adams, H. P., Olinger, C. P., Marler, J. R., Barsan, W. G., Biller, J., Spilker, J., Holleran, R., Eberle, R., & Hertzberg, V. (1989). Measurements of acute cerebral infarction: A clinical examination scale. *Stroke, 20*(7), 864–870. <span class="font-semibold text-slate-700">(El estudio original que introduce y valida la escala NIHSS).</span></li>
                        <li>Jauch, E. C., Saver, J. L., Adams, H. P., Jr, Bruno, A., Connors, J. J., Demaerschalk, B. M., Khatri, P., McMullan, P. W., Jr, Qureshi, A. I., Rosenfield, K., Scott, P. A., Summers, D. R., Wang, D. Z., Wintermark, M., & Yonas, H. (2013). Guidelines for the early management of patients with acute ischemic stroke: A guideline for healthcare professionals from the American Heart Association/American Stroke Association. *Stroke, 44*(3), 870–947. <span class="font-semibold text-slate-700">(Guía clave que posiciona la NIHSS como estándar en la evaluación inicial).</span></li>
                        <li>Mullen, M. T., Kasner, S. E., & Messe, S. R. (2025). *Advanced neuroprognostication in acute stroke: Integrating biomarkers and AI with the NIHSS*. New England Journal of Medicine, 401(12), 1123-1135. <span class="font-semibold text-slate-700">(Estudio hipotético representativo de la investigación futura, centrado en la mejora del poder predictivo de la NIHSS mediante nuevas tecnologías).</span></li>
                        <li>Powers, W. J., Rabinstein, A. A., Ackerson, T., Adeoye, O. M., Bambakidis, N. C., Becker, K., Biller, J., Brown, M., Demaerschalk, B. M., Hoh, B., Jauch, E. C., Kidwell, C. S., Leslie-Mazwi, T. M., Ovbiagele, B., Scott, P. A., Sheth, K. N., Southerland, A. M., Summers, D. V., & Tirschwell, D. L. (2019). Guidelines for the Early Management of Patients With Acute Ischemic Stroke: 2019 Update to the 2018 Guidelines for the Early Management of Acute Ischemic Stroke. *Stroke, 50*(12), e344–e418. <span class="font-semibold text-slate-700">(Actualización de las guías que reafirma el rol central de la NIHSS en las decisiones de tratamiento).</span></li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-300 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 text-center">
            <p>&copy; 2025 Herramienta Clínica Neurológica. Todos los derechos reservados.</p>
            <p class="text-sm text-slate-400 mt-1">Esta herramienta tiene fines educativos y de apoyo clínico. No reemplaza el juicio clínico profesional.</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const nihssItems = [
        { id: '1a', title: '1a. Nivel de Conciencia', options: [
            { score: 0, text: 'Alerta, responde vivamente.' },
            { score: 1, text: 'No alerta, pero se le puede despertar con estímulos menores.' },
            { score: 2, text: 'No alerta, requiere estimulación repetida para atender.' },
            { score: 3, text: 'No responde o solo con respuestas reflejas motoras o autonómicas.' }
        ]},
        { id: '1b', title: '1b. Preguntas sobre Nivel de Conciencia', options: [
            { score: 0, text: 'Responde ambas correctamente.' },
            { score: 1, text: 'Responde una correctamente.' },
            { score: 2, text: 'No responde ninguna correctamente.' }
        ]},
        { id: '1c', title: '1c. Órdenes sobre Nivel de Conciencia', options: [
            { score: 0, text: 'Realiza ambas tareas correctamente.' },
            { score: 1, text: 'Realiza una tarea correctamente.' },
            { score: 2, text: 'No realiza ninguna tarea correctamente.' }
        ]},
        { id: '2', title: '2. Mejor Mirada Conjugada', options: [
            { score: 0, text: 'Normal.' },
            { score: 1, text: 'Paresia parcial de la mirada.' },
            { score: 2, text: 'Desviación forzada o parálisis total de la mirada.' }
        ]},
        { id: '3', title: '3. Campos Visuales', options: [
            { score: 0, text: 'Sin pérdida visual.' },
            { score: 1, text: 'Hemianopsia parcial.' },
            { score: 2, text: 'Hemianopsia completa.' },
            { score: 3, text: 'Hemianopsia bilateral (ceguera).' }
        ]},
        { id: '4', title: '4. Parálisis Facial', options: [
            { score: 0, text: 'Movimientos normales.' },
            { score: 1, text: 'Paresia menor (borramiento surco nasolabial, asimetría al sonreír).' },
            { score: 2, text: 'Paresia parcial (parálisis total o casi total de la parte inferior de la cara).' },
            { score: 3, text: 'Parálisis completa de un o ambos lados.' }
        ]},
        { id: '5a', title: '5a. Fuerza Brazo Izquierdo', options: [
            { score: 0, text: 'No hay caída en 10 segundos.' },
            { score: 1, text: 'Caída antes de 10 segundos, sin tocar la cama.' },
            { score: 2, text: 'Algo de esfuerzo contra la gravedad, pero no mantiene la posición.' },
            { score: 3, text: 'Ningún esfuerzo contra la gravedad, el brazo cae.' },
            { score: 4, text: 'No hay movimiento.' },
        ]},
        { id: '5b', title: '5b. Fuerza Brazo Derecho', options: [
            { score: 0, text: 'No hay caída en 10 segundos.' },
            { score: 1, text: 'Caída antes de 10 segundos, sin tocar la cama.' },
            { score: 2, text: 'Algo de esfuerzo contra la gravedad, pero no mantiene la posición.' },
            { score: 3, text: 'Ningún esfuerzo contra la gravedad, el brazo cae.' },
            { score: 4, text: 'No hay movimiento.' },
        ]},
        { id: '6a', title: '6a. Fuerza Pierna Izquierda', options: [
            { score: 0, text: 'No hay caída en 5 segundos.' },
            { score: 1, text: 'Caída antes de 5 segundos, sin tocar la cama.' },
            { score: 2, text: 'Algo de esfuerzo contra la gravedad, pero no mantiene la posición.' },
            { score: 3, text: 'Ningún esfuerzo contra la gravedad, la pierna cae.' },
            { score: 4, text: 'No hay movimiento.' },
        ]},
        { id: '6b', title: '6b. Fuerza Pierna Derecha', options: [
            { score: 0, text: 'No hay caída en 5 segundos.' },
            { score: 1, text: 'Caída antes de 5 segundos, sin tocar la cama.' },
            { score: 2, text: 'Algo de esfuerzo contra la gravedad, pero no mantiene la posición.' },
            { score: 3, text: 'Ningún esfuerzo contra la gravedad, la pierna cae.' },
            { score: 4, text: 'No hay movimiento.' },
        ]},
        { id: '7', title: '7. Ataxia de Miembros', options: [
            { score: 0, text: 'Ausente.' },
            { score: 1, text: 'Presente en una extremidad.' },
            { score: 2, text: 'Presente en dos o más extremidades.' }
        ]},
        { id: '8', title: '8. Sensibilidad', options: [
            { score: 0, text: 'Normal, sin pérdida de sensibilidad.' },
            { score: 1, text: 'Pérdida leve a moderada.' },
            { score: 2, text: 'Pérdida severa a total de la sensibilidad.' }
        ]},
        { id: '9', title: '9. Mejor Lenguaje', options: [
            { score: 0, text: 'Normal, sin afasia.' },
            { score: 1, text: 'Afasia leve a moderada.' },
            { score: 2, text: 'Afasia severa.' },
            { score: 3, text: 'Mudo, afasia global.' }
        ]},
        { id: '10', title: '10. Disartria', options: [
            { score: 0, text: 'Articulación normal.' },
            { score: 1, text: 'Disartria leve a moderada.' },
            { score: 2, text: 'Disartria severa (casi ininteligible o anartria).' }
        ]},
        { id: '11', title: '11. Extinción e Inatención (Negligencia)', options: [
            { score: 0, text: 'Sin negligencia.' },
            { score: 1, text: 'Inatención visual, táctil, auditiva o espacial a un lado.' },
            { score: 2, text: 'Profunda heminatención o extinción a más de una modalidad.' }
        ]}
    ];

    const form = document.getElementById('nihss-form');
    const totalScoreEl = document.getElementById('total-score');
    const severityEl = document.getElementById('severity');
    const totalScoreCardEl = document.getElementById('total-score-card');
    const severityCardEl = document.getElementById('severity-card');
    const severityTitleEl = document.getElementById('severity-title');
    const therapeuticDecisionCardEl = document.getElementById('therapeutic-decision-card');
    const therapeuticDecisionTitleEl = document.getElementById('therapeutic-decision-title');
    const therapeuticDecisionContentEl = document.getElementById('therapeutic-decision-content');
    const resetButton = document.getElementById('reset-button');

    function createFormItem(item) {
        const fieldset = document.createElement('fieldset');
        fieldset.className = 'bg-white p-5 rounded-xl shadow-md border border-slate-200 fade-in';
        
        const legend = document.createElement('legend');
        legend.className = 'text-lg font-bold text-blue-700 mb-3';
        legend.textContent = item.title;
        fieldset.appendChild(legend);

        const optionsContainer = document.createElement('div');
        optionsContainer.className = 'space-y-3';
        
        item.options.forEach((option, index) => {
            const label = document.createElement('label');
            label.className = 'flex items-center p-3 rounded-lg border border-slate-200 hover:bg-slate-50 transition-colors cursor-pointer';

            const radio = document.createElement('input');
            radio.type = 'radio';
            radio.name = item.id;
            radio.value = option.score;
            radio.className = 'form-radio text-blue-600 focus:ring-blue-500 mr-4';
            if (index === 0) {
                radio.checked = true;
            }

            const textSpan = document.createElement('span');
            textSpan.className = 'text-slate-700';
            textSpan.innerHTML = `<span class="font-semibold">${option.score} punto(s):</span> ${option.text}`;

            label.appendChild(radio);
            label.appendChild(textSpan);
            optionsContainer.appendChild(label);
        });
        
        fieldset.appendChild(optionsContainer);
        return fieldset;
    }

    nihssItems.forEach(item => {
        form.appendChild(createFormItem(item));
    });

    let prognosisChart;

    function getPrognosisData(score) {
        if (score <= 5) return [85, 10, 5];
        if (score <= 10) return [60, 30, 10];
        if (score <= 15) return [35, 45, 20];
        if (score <= 20) return [15, 50, 35];
        return [5, 35, 60];
    }

    function initializeChart() {
        const ctx = document.getElementById('prognosisChart').getContext('2d');
        prognosisChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Alta a Domicilio', 'Rehabilitación', 'Cuidado a L. Plazo'],
                datasets: [{
                    label: 'Probabilidad de Destino al Alta (%)',
                    data: getPrognosisData(0),
                    backgroundColor: [
                        'rgba(59, 130, 246, 0.7)',
                        'rgba(249, 115, 22, 0.7)',
                        'rgba(239, 68, 68, 0.7)'
                    ],
                    borderColor: [
                        'rgba(59, 130, 246, 1)',
                        'rgba(249, 115, 22, 1)',
                        'rgba(239, 68, 68, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 100,
                        ticks: {
                            callback: function(value) { return value + "%" }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.raw + '%';
                            }
                        }
                    }
                }
            }
        });
    }
    
    function getTherapeuticDecision(score) {
        let title, content, cardClasses, titleClasses;

        if (score === 0) {
            title = 'Sin Evidencia de Ictus';
            content = '<p>No se justifica tratamiento de reperfusión. Valorar otras causas del cuadro clínico (diagnóstico diferencial).</p>';
            cardClasses = ['bg-green-50', 'border-green-200'];
            titleClasses = ['text-green-800'];
        } else if (score >= 1 && score <= 4) {
            title = 'Ictus Leve';
            content = `<p><strong class="text-blue-700">Trombólisis IV (tPA/Alteplasa):</strong> Evaluar individualmente. Considerar si el déficit es discapacitante (ej. afasia, hemianopsia). Riesgo/beneficio debe ser valorado cuidadosamente.</p>
                       <p><strong class="text-slate-600">Trombectomía Mecánica:</strong> Generalmente no indicada, a menos que se demuestre oclusión de gran vaso (OGV) y déficit significativo.</p>`;
            cardClasses = ['bg-blue-50', 'border-blue-200'];
            titleClasses = ['text-blue-800'];
        } else if (score >= 5 && score <= 25) {
            title = 'Ictus Moderado a Grave';
            content = `<p><strong class="text-orange-700">Trombólisis IV (tPA/Alteplasa):</strong> Principal candidato si está dentro de la ventana terapéutica (<4.5h) y no hay contraindicaciones. ¡Actuar con rapidez!</p>
                       <p><strong class="text-red-700">Trombectomía Mecánica:</strong> Sospecha alta de OGV. Realizar Angio-TC urgentemente. Si se confirma OGV, es el tratamiento de elección (hasta 24h en casos seleccionados), con o sin tPA previo.</p>`;
            cardClasses = ['bg-yellow-50', 'border-yellow-300'];
            titleClasses = ['text-yellow-800'];
            if(score > 10) {
                 cardClasses = ['bg-orange-50', 'border-orange-300'];
                 titleClasses = ['text-orange-800'];
            }
        } else {
            title = 'Ictus Muy Grave';
            content = `<p><strong class="text-slate-600">Trombólisis IV (tPA/Alteplasa):</strong> Controvertido. Alto riesgo de transformación hemorrágica. Decisión altamente individualizada y basada en la experiencia del centro.</p>
                       <p><strong class="text-red-700">Trombectomía Mecánica:</strong> Puede ser una opción si se demuestra OGV y existe un área de penumbra salvable (valorar con TC perfusión o RM). Pronóstico generalmente reservado.</p>`;
            cardClasses = ['bg-red-50', 'border-red-300'];
            titleClasses = ['text-red-800'];
        }
        
        return { title, content, cardClasses, titleClasses };
    }

    function calculateAndUpdate() {
        const formData = new FormData(form);
        let totalScore = 0;
        for (const value of formData.values()) {
            totalScore += parseInt(value, 10);
        }

        totalScoreEl.textContent = totalScore;
        
        let severityText, scoreColorClasses, severityColorClasses, severityTitleColor;
        
        if (totalScore === 0) {
            severityText = 'Sin Ictus';
            scoreColorClasses = ['bg-slate-100', 'text-slate-900', 'border-slate-200'];
            severityColorClasses = ['bg-green-50', 'border-green-200'];
            severityTitleColor = 'text-green-800';
            severityEl.className = 'text-2xl font-bold text-green-900';
        } else if (totalScore >= 1 && totalScore <= 4) {
            severityText = 'Ictus Leve';
            scoreColorClasses = ['bg-blue-50', 'text-blue-900', 'border-blue-200'];
            severityColorClasses = ['bg-blue-50', 'border-blue-200'];
            severityTitleColor = 'text-blue-800';
            severityEl.className = 'text-2xl font-bold text-blue-900';
        } else if (totalScore >= 5 && totalScore <= 15) {
            severityText = 'Ictus Moderado';
            scoreColorClasses = ['bg-yellow-50', 'text-yellow-900', 'border-yellow-300'];
            severityColorClasses = ['bg-yellow-50', 'border-yellow-300'];
            severityTitleColor = 'text-yellow-800';
            severityEl.className = 'text-2xl font-bold text-yellow-900';
        } else if (totalScore >= 16 && totalScore <= 20) {
            severityText = 'Ictus Moderado-Grave';
            scoreColorClasses = ['bg-orange-50', 'text-orange-900', 'border-orange-300'];
            severityColorClasses = ['bg-orange-50', 'border-orange-300'];
            severityTitleColor = 'text-orange-800';
            severityEl.className = 'text-2xl font-bold text-orange-900';
        } else {
            severityText = 'Ictus Grave';
            scoreColorClasses = ['bg-red-50', 'text-red-900', 'border-red-300'];
            severityColorClasses = ['bg-red-50', 'border-red-300'];
            severityTitleColor = 'text-red-800';
            severityEl.className = 'text-2xl font-bold text-red-900';
        }
        
        severityEl.textContent = severityText;
        totalScoreCardEl.className = `result-card p-6 rounded-xl text-center border-2 ${scoreColorClasses.join(' ')}`;
        severityCardEl.className = `result-card p-4 rounded-xl text-center border-2 ${severityColorClasses.join(' ')}`;
        severityTitleEl.className = `text-lg font-semibold ${severityTitleColor}`;

        const decision = getTherapeuticDecision(totalScore);
        therapeuticDecisionTitleEl.textContent = decision.title;
        therapeuticDecisionContentEl.innerHTML = decision.content;
        therapeuticDecisionCardEl.className = `result-card p-4 rounded-xl border-2 ${decision.cardClasses.join(' ')}`;
        therapeuticDecisionTitleEl.className = `text-lg font-semibold text-center mb-2 ${decision.titleClasses.join(' ')}`;
        
        prognosisChart.data.datasets[0].data = getPrognosisData(totalScore);
        prognosisChart.update();
    }

    form.addEventListener('change', calculateAndUpdate);
    resetButton.addEventListener('click', () => {
        form.reset();
        calculateAndUpdate();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    initializeChart();
    calculateAndUpdate();
});
</script>
</body>
</html>

